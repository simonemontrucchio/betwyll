<div ng-controller="TwyllbookViewCtrl as $ctrl">

    <div class="no-print">
        <form class="form-horizontal" role="form" id="settingsForm" ng-submit="mergeFiles()">
            <div id="mergefiles">
                <input type="hidden" id="NumberOfRows" value="2">
                <div class="form-group row">
                    <div class="col-sm-3">
                        <label>Select all the files *.json you want to merge</label>
                        <div class="settingsGroup">
                            <input type="file" files-input ng-model="files" ng-change="readfiles(this.files)" multiple /> {{count}}
                            <!-- <input type="file" ng-change="readUploaded(this.files[0],1)" ng-model="file1"> -->
                        </div>
                    </div>
                </div>

            </div>
        </form>






        <hr>

        <!-- serve per fare in parsing senza mostrarlo-->
        <div id="parser" style="display:none"></div>

        <h2 ng-if="json.uploaded == true"><em>{{info.name}}</em> generated on {{info.date | date:'dd/MM/yyyy'}} at {{info.date | date:'HH:mm:ss'}}</h2>



        <button class="btn btn-success center-block" ng-click="addJson()">MOSTRA</button>

        <hr>






        <!--------------
            IMPOSTAZIONI
        -------------->
        <hr>
        <div>
            Larghezza pagina
            <input  input-text type="text" ng-model="larghezza" ng-change="impostazioni(larghezza)"  />
        </div>

        <hr>



    </div>









    <!--------------
        PARTE DA STAMPARE
    -------------->
    <div class="container" ng-show="json.uploaded == true">

        <div layout-wrap ng-repeat="element in json | limitTo:225">

            <div>
                <span ng-bind-html="element.content | trusted"></span>
            </div>
            <br>
            <ul class="twylls-list" >
                <div  ng-repeat="comment in element.comments | limitTo:225">

                    <li class="twyll" ng-style="{background: doc_classes_colors[$index % doc_classes_colors.length]}">
                        <br>
                        <div class="row">
                            <div class="col-sm-2 col-print-2">
                                <img src="{{comment.user.avatar}}" class="img-circle">
                            </div>
                            <div class="col-sm-5 col-print-5">
                                <h4 ng-bind-html="comment.user.nickname | trusted"></h4>
                            </div>
                            <div class="col-sm-5 col-print-5">
                                {{comment.timestamp}}
                            </div>

                        </div>
                        <span ng-bind-html="comment.content | trusted"></span>

                    </li>

                    <div ng-repeat="answer in comment.answers | limitTo:225">
                        <br>
                        <li class="twyll response" ng-style="{background: doc_classes_colors[$index % doc_classes_colors.length]}">
                            <span ng-bind-html="answer.content | trusted"></span>
                        </li>
                    </div>

                </div>




                <br>
            </ul>
        </div>
    </div>

</div>
